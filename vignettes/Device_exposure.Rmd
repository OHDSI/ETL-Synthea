---
layout: default
title: Device_exposure
nav_order: 9
description: "Device_exposure mapping from devices.csv"
vignette: >
  %\VignetteIndexEntry{Device_exposure}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

# Device_exposure

## Reading from Synthea table devices.csv

| Destination Field | Source field | Logic | Comment field |
| --- | --- | --- | --- |
| device_exposure_id |  | Autogenerated |  |
| person_id | patient | Map by mapping person.person_source_value to patient.  Find person.person_id by mapping encounters.patient to person.person_source_value. |  |
| device_concept_id | code | Use the following SQL code to lookup target_concept_id in CTE_TARGET_VOCAB_MAP:    select ctvm.target_concept_id    from devices d     join cte_target_vocab_map ctvm       on ctvm.source_code              = d.code     and ctvm.target_domain_id       = 'Device'     and ctvm.target_vocabulary_id = 'SNOMED'     and ctvm.source_vocabulary_id = 'SNOMED'     and ctvm.target_invalid_reason is NULL     and ctvm.target_standard_concept = 'S' |  |
| device_exposure_start_date | start |  |  |
| device_exposure_start_datetime | start |  |  |
| device_exposure_end_date | stop |  |  |
| device_exposure_end_datetime | stop |  |  |
| device_type_concept_id |  | Set to 38000267 (Outpatient Detail) for all records |  |
| unique_device_id |udi  |  |  |
| quantity |  | cast(null as integer) |  |
| provider_id | provider | Look up provider_id using provider, joining to the provider.provider_source_value field in the omop table  |  |
| visit_occurrence_id | encounter | Lookup visit_occurrence_id using encounter, joining to temp table defined in AllVisitTable.sql. |  |
| visit_detail_id | encounter | Lookup visit_occurrence_id using encounter, joining to temp table defined in AllVisitTable.sql and add 1000000 |  |
| device_source_value | code |  |  |
| device_source_concept_id | code | Use the following SQL code to lookup the source_concept_id in CTE_SOURCE_VOCAB_MAP:     select csvm.source_concept_id     from cte_source_vocab_map csvm      join devices d        on csvm.source_code                 = d.code      and csvm.source_vocabulary_id  = 'SNOMED' |  |
