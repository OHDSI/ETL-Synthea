<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Visit Detail • ETLSyntheaBuilder</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Visit Detail">
<meta property="og:description" content="Visit_occurrence mapping from encounters.csv">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ETLSyntheaBuilder</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/care_site.html">Care_site</a>
    </li>
    <li>
      <a href="../articles/condition_occurrence.html">Condition_occurrence</a>
    </li>
    <li>
      <a href="../articles/cost.html">Cost</a>
    </li>
    <li>
      <a href="../articles/death.html">Death</a>
    </li>
    <li>
      <a href="../articles/device_exposure.html">Device_exposure</a>
    </li>
    <li>
      <a href="../articles/drug_exposure.html">Drug_exposure</a>
    </li>
    <li>
      <a href="../articles/location.html">Location</a>
    </li>
    <li>
      <a href="../articles/measurement.html">Measurement</a>
    </li>
    <li>
      <a href="../articles/observation.html">Observation</a>
    </li>
    <li>
      <a href="../articles/observation_period.html">Observation_period</a>
    </li>
    <li>
      <a href="../articles/payer_plan_period.html">Payer_plan_period</a>
    </li>
    <li>
      <a href="../articles/person.html">Person</a>
    </li>
    <li>
      <a href="../articles/procedure_occurrence.html">Procedure_occurrence</a>
    </li>
    <li>
      <a href="../articles/provider.html">Provider</a>
    </li>
    <li>
      <a href="../articles/visit_detail.html">Visit Detail</a>
    </li>
    <li>
      <a href="../articles/visit_occurrence.html">Visit Occurrence</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Visit Detail</h1>
            
      
      
      <div class="hidden name"><code>visit_detail.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="visit_detail">Visit_detail<a class="anchor" aria-label="anchor" href="#visit_detail"></a>
</h2>
<div class="section level3">
<h3 id="reading-from-synthea-table-encounters-csv">Reading from Synthea table encounters.csv<a class="anchor" aria-label="anchor" href="#reading-from-synthea-table-encounters-csv"></a>
</h3>
<ul>
<li>Use logic found here (depending on cdm version - CDM v5.4 provided
as example):: <a href="https://github.com/OHDSI/ETL-Synthea/blob/main/inst/sql/sql_server/cdm_version/v540/AllVisitTable.sql" class="external-link uri">https://github.com/OHDSI/ETL-Synthea/blob/main/inst/sql/sql_server/cdm_version/v540/AllVisitTable.sql</a>
and <a href="https://github.com/OHDSI/ETL-Synthea/blob/main/inst/sql/sql_server/cdm_version/v540/final_visit_ids.sql" class="external-link uri">https://github.com/OHDSI/ETL-Synthea/blob/main/inst/sql/sql_server/cdm_version/v540/final_visit_ids.sql</a>
</li>
</ul>
<table class="table">
<colgroup>
<col width="25%">
<col width="25%">
<col width="25%">
<col width="25%">
</colgroup>
<thead><tr class="header">
<th>Destination Field</th>
<th>Source field</th>
<th>Logic</th>
<th>Comment field</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>visit_detail__id</td>
<td>all_visits.visit_occurrence_id</td>
<td>all_visits.visit_occurrence_id + 1000000</td>
<td></td>
</tr>
<tr class="even">
<td>person_id</td>
<td>patient</td>
<td>Map by mapping person.person_source_value to patient. Find
person.person_id by mapping encouters.patient to
person.person_source_value.</td>
<td></td>
</tr>
<tr class="odd">
<td>visit_detail__concept_id</td>
<td>encounterclass</td>
<td>When encounterclass is ‘emergency’ or ‘urgentcare’ then set to 9203.
When encounterclass is ‘ambulatory’, ‘wellness’, or ‘outpatient’ then
set to 9202. When encounterclass is ‘inpatient’ then set to 9201.
Otherwise set to 0.</td>
<td></td>
</tr>
<tr class="even">
<td>visit_detail__start_date</td>
<td>start</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>visit_detail__start_datetime</td>
<td>start</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>visi_detail_t_end_date</td>
<td>stop</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>visit_detail__end_datetime</td>
<td>stop</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>visit__detail_type_concept_id</td>
<td></td>
<td>Set all records as concept_id 32827 (EHR encounter record).</td>
<td></td>
</tr>
<tr class="odd">
<td>provider_id</td>
<td>encounters.provider</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>care_site_id</td>
<td></td>
<td>Set to null for all records</td>
<td></td>
</tr>
<tr class="odd">
<td>admitted_from_source_concept_id</td>
<td></td>
<td>Set to 0 for all records</td>
<td></td>
</tr>
<tr class="even">
<td>admitted_from_source_value</td>
<td></td>
<td>Set to null for all record</td>
<td></td>
</tr>
<tr class="odd">
<td>discharged_to_concept_id</td>
<td></td>
<td>Set to 0 for all records</td>
<td></td>
</tr>
<tr class="even">
<td>discharged_to_source_value</td>
<td></td>
<td>Set to null for all record</td>
<td></td>
</tr>
<tr class="odd">
<td>preceding_visit_detail__id</td>
<td></td>
<td>lag(all_visits.visit_occurrence_id) over(partition by
person.person_id order by all_visits.visit_start_date) + 1000000</td>
<td></td>
</tr>
<tr class="even">
<td>visit_detail_source_value</td>
<td>all_visits.encounter_id</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>visit_detail_source_concept_id</td>
<td></td>
<td>Set to 0 for all record</td>
<td></td>
</tr>
</tbody>
</table>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Evanette Burrows.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
